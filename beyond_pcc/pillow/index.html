

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  


  <link rel="shortcut icon" href="/pcc_2e/assets/images/favicon.ico" type="image/x-icon"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/pcc_2e/assets/images/apple-touch-icon.png"/>
  <link rel="icon" type="image/png" sizes="32x32" href="/pcc_2e/assets/images/favicon-32x32.png"/>
  <link rel="icon" type="image/png" sizes="16x16" href="/pcc_2e/assets/images/favicon-16x16.png"/>
  <link rel="manifest" href="/pcc_2e/assets/site.webmanifest"/>

  <link rel="stylesheet" href="/pcc_2e/assets/css/just-the-docs-default.css">

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-H1B6T2W9DJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    
    gtag('config', 'G-H1B6T2W9DJ');
    
  </script>

  

  
  <script type="text/javascript" src="/pcc_2e/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/pcc_2e/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Pillow - Working with Images | Python Crash Course, 2nd Edition</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Pillow - Working with Images" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Online Resources for Python Crash Course, from No Starch Press" />
<meta property="og:description" content="Online Resources for Python Crash Course, from No Starch Press" />
<link rel="canonical" href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pillow/" />
<meta property="og:url" content="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pillow/" />
<meta property="og:site_name" content="Python Crash Course, 2nd Edition" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Pillow - Working with Images" />
<script type="application/ld+json">
{"headline":"Pillow - Working with Images","@type":"WebPage","description":"Online Resources for Python Crash Course, from No Starch Press","url":"https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pillow/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mavjav-edu.github.io/pcc_2e/assets/images/pcc_logo_csyivv_c_scale,w_788.png"}},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="https://mavjav-edu.github.io/pcc_2e/" class="site-title lh-tight">
  <div class="site-logo">
    <img sizes="(max-width: 1380px) 100vw, 1380px"
srcset="/pcc_2e/assets/images/pcc_logo_csyivv_c_scale,w_50.png 50w,
/pcc_2e/assets/images/pcc_logo_csyivv_c_scale,w_508.png 508w,
/pcc_2e/assets/images/pcc_logo_csyivv_c_scale,w_788.png 788w,
/pcc_2e/assets/images/pcc_logo_csyivv_c_scale,w_1380.png 1380w"
src="/pcc_2e/assets/images/pcc_logo_csyivv_c_scale,w_1380.png"
alt="Python Crash Course 2nd Edition"></div>

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/" class="nav-list-link">Home</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/cip/" class="nav-list-link">Coding is political</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/updates/" class="nav-list-link">Updates</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/first_printing/" class="nav-list-link">First printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/second_printing/" class="nav-list-link">Second printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/third_printing/" class="nav-list-link">Third printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/fourth_printing/" class="nav-list-link">Fourth printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/fifth_printing/" class="nav-list-link">Fifth printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/sixth_printing/" class="nav-list-link">Sixth printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/seventh_printing/" class="nav-list-link">Seventh printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/eighth_printing/" class="nav-list-link">Eighth printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/ninth_printing/" class="nav-list-link">Ninth printing</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/which_printing/" class="nav-list-link">Which printing do I have?</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/updates/django3_2/" class="nav-list-link">Django 3.2</a>
                  </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/solutions/" class="nav-list-link">Solutions</a><ul class="nav-list"><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_2/" class="nav-list-link">Chapter 2</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_3/" class="nav-list-link">Chapter 3</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_4/" class="nav-list-link">Chapter 4</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_5/" class="nav-list-link">Chapter 5</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_6/" class="nav-list-link">Chapter 6</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_7/" class="nav-list-link">Chapter 7</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_8/" class="nav-list-link">Chapter 8</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_9/" class="nav-list-link">Chapter 9</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_10/" class="nav-list-link">Chapter 10</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_11/" class="nav-list-link">Chapter 11</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_12/" class="nav-list-link">Chapter 12</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_13/" class="nav-list-link">Chapter 13</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_14/" class="nav-list-link">Chapter 14</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_15/" class="nav-list-link">Chapter 15</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_16/" class="nav-list-link">Chapter 16</a>
                  </li><li class="nav-list-item ">
                    <a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_17/" class="nav-list-link">Chapter 17</a>
                  </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/reader_questions/" class="nav-list-link">Reader Questions</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/finding_employment/" class="nav-list-link">Finding Employment</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/survey/" class="nav-list-link">Survey</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/mailing_list/" class="nav-list-link">Mailing List</a><ul class="nav-list"></ul></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/contact/" class="nav-list-link">Contact</a></li></ul></li><li class="nav-list-item"><a href="https://mavjav-edu.github.io/pcc_2e/new_in_2e/new_in_2e/" class="nav-list-link">What's new?</a></li><li class="nav-list-item"><a href="https://mavjav-edu.github.io/pcc_2e/new_in_2e/" class="nav-list-link">What's new?</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/" class="nav-list-link">Setup Instructions</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/windows/" class="nav-list-link">Setting up Python on Windows</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/macos/" class="nav-list-link">Setting up Python on macOS</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/linux/" class="nav-list-link">Setting up Python on Linux</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/setup_instructions/" class="nav-list-link">Setup Instructions</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/windows/" class="nav-list-link">Setting up Python on Windows</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/macos/" class="nav-list-link">Setting up Python on macOS</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/setup_instructions/linux/" class="nav-list-link">Setting up Python on Linux</a></li></ul></li><li class="nav-list-item"><a href="https://mavjav-edu.github.io/pcc_2e/cheat_sheets/" class="nav-list-link">Cheat Sheets</a></li><li class="nav-list-item"><a href="https://mavjav-edu.github.io/pcc_2e/cheat_sheets/cheat_sheets/" class="nav-list-link">Cheat Sheets</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/updates/updates/" class="nav-list-link">Updates</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/first_printing/" class="nav-list-link">First printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/second_printing/" class="nav-list-link">Second printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/third_printing/" class="nav-list-link">Third printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/fourth_printing/" class="nav-list-link">Fourth printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/fifth_printing/" class="nav-list-link">Fifth printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/sixth_printing/" class="nav-list-link">Sixth printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/seventh_printing/" class="nav-list-link">Seventh printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/eighth_printing/" class="nav-list-link">Eighth printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/ninth_printing/" class="nav-list-link">Ninth printing</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/which_printing/" class="nav-list-link">Which printing do I have?</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/updates/django3_2/" class="nav-list-link">Django 3.2</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/solutions/solutions/" class="nav-list-link">Solutions</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_2/" class="nav-list-link">Chapter 2</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_3/" class="nav-list-link">Chapter 3</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_4/" class="nav-list-link">Chapter 4</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_5/" class="nav-list-link">Chapter 5</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_6/" class="nav-list-link">Chapter 6</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_7/" class="nav-list-link">Chapter 7</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_8/" class="nav-list-link">Chapter 8</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_9/" class="nav-list-link">Chapter 9</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_10/" class="nav-list-link">Chapter 10</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_11/" class="nav-list-link">Chapter 11</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_12/" class="nav-list-link">Chapter 12</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_13/" class="nav-list-link">Chapter 13</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_14/" class="nav-list-link">Chapter 14</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_15/" class="nav-list-link">Chapter 15</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_16/" class="nav-list-link">Chapter 16</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/solutions/chapter_17/" class="nav-list-link">Chapter 17</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/challenges/challenges/" class="nav-list-link">Challenges</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/playing_cards/" class="nav-list-link">Playing Cards</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/photo_filters/" class="nav-list-link">Photo Filters</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/coding_for_social_justice/" class="nav-list-link">Coding for Social Justice</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/ai_player/" class="nav-list-link">Automated Alien Invasion Player</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/challenges/" class="nav-list-link">Challenges</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/playing_cards/" class="nav-list-link">Playing Cards</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/photo_filters/" class="nav-list-link">Photo Filters</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/coding_for_social_justice/" class="nav-list-link">Coding for Social Justice</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/challenges/ai_player/" class="nav-list-link">Automated Alien Invasion Player</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/" class="nav-list-link">Beyond PCC</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/random_functions/" class="nav-list-link">Random Functions</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pygame_sprite_sheets/" class="nav-list-link">Using Sprite Sheets in Pygame</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/ai_player/" class="nav-list-link">Pygame - Adding Sound and Automating Game Play</a></li><li class="nav-list-item  active"><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pillow/" class="nav-list-link active">Pillow - Working with Images</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/extracting_from_excel/" class="nav-list-link">Extracting Data from Excel Files</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/beyond_pcc/" class="nav-list-link">Beyond PCC</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/random_functions/" class="nav-list-link">Random Functions</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pygame_sprite_sheets/" class="nav-list-link">Using Sprite Sheets in Pygame</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/ai_player/" class="nav-list-link">Pygame - Adding Sound and Automating Game Play</a></li><li class="nav-list-item  active"><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/pillow/" class="nav-list-link active">Pillow - Working with Images</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/extracting_from_excel/" class="nav-list-link">Extracting Data from Excel Files</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/recommended_reading/" class="nav-list-link">Recommended Reading</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/first_steps/" class="nav-list-link">First Steps</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/general_python/" class="nav-list-link">General Python Resources</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/data_science/" class="nav-list-link">Data Science Resources</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/django/" class="nav-list-link">Django Resources</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/" class="nav-list-link">Recommended Reading</a><ul class="nav-list "><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/first_steps/" class="nav-list-link">First Steps</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/general_python/" class="nav-list-link">General Python Resources</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/data_science/" class="nav-list-link">Data Science Resources</a></li><li class="nav-list-item "><a href="https://mavjav-edu.github.io/pcc_2e/recommended_reading/django/" class="nav-list-link">Django Resources</a></li></ul></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Python Crash Course, 2nd Edition" aria-label="Search Python Crash Course, 2nd Edition" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            
              <li class="aux-nav-list-item">
                <a href="//github.com/mavjav-edu/pcc_2e" class="site-button"
                  
                >
                  Python Crash Course on GitHub
                </a>
              </li>
            
          </ul>
        </nav>
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list">
              
                <li class="breadcrumb-nav-list-item"><a href="https://mavjav-edu.github.io/pcc_2e/beyond_pcc/beyond_pcc/">Beyond PCC</a></li>
              
              <li class="breadcrumb-nav-list-item"><span>Pillow - Working with Images</span></li>
            </ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">
        
          <h1 class="no_toc" id="pillow-working-with-images">
        
        
          <a href="#pillow-working-with-images" class="anchor-heading" aria-labelledby="pillow-working-with-images"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pillow: Working with Images
        
        
      </h1>
    

<p>The Pillow package is a fork of the older <code class="language-plaintext highlighter-rouge">PIL</code> library, which stood for <em>Python Imaging Library</em>. This package allows you to load and work with existing images, and it also allows you to create new images and fill the pixels programmatically. This makes it possible to make your own photo filters, build your own image adjustment tools, and explore digitally-generated art.</p>

<ul id="markdown-toc">
  <li><a href="#installing-pillow" id="markdown-toc-installing-pillow">Installing Pillow</a></li>
  <li><a href="#loading-an-image" id="markdown-toc-loading-an-image">Loading an Image</a></li>
  <li><a href="#exploring-pixel-data" id="markdown-toc-exploring-pixel-data">Exploring Pixel Data</a>    <ul>
      <li><a href="#examining-the-first-pixel" id="markdown-toc-examining-the-first-pixel">Examining the First Pixel</a></li>
      <li><a href="#examining-multiple-pixels" id="markdown-toc-examining-multiple-pixels">Examining Multiple Pixels</a></li>
      <li><a href="#seeing-all-the-pixels" id="markdown-toc-seeing-all-the-pixels">Seeing All the Pixels</a></li>
    </ul>
  </li>
  <li><a href="#making-an-exact-copy" id="markdown-toc-making-an-exact-copy">Making an Exact Copy</a>    <ul>
      <li><a href="#generating-a-new-image" id="markdown-toc-generating-a-new-image">Generating a New Image</a></li>
      <li><a href="#copying-all-pixels-to-the-new-image" id="markdown-toc-copying-all-pixels-to-the-new-image">Copying all Pixels to the New Image</a></li>
      <li><a href="#saving-the-new-image" id="markdown-toc-saving-the-new-image">Saving the New Image</a></li>
      <li><a href="#copying-individual-rgb-values" id="markdown-toc-copying-individual-rgb-values">Copying Individual RGB Values</a></li>
    </ul>
  </li>
  <li><a href="#brightening-the-image" id="markdown-toc-brightening-the-image">Brightening the Image</a></li>
  <li><a href="#starting-from-a-blank-image" id="markdown-toc-starting-from-a-blank-image">Starting From a Blank Image</a></li>
  <li><a href="#final-words" id="markdown-toc-final-words">Final Words</a></li>
</ul><hr />
      <h2 id="installing-pillow">
        
        
          <a href="#installing-pillow" class="anchor-heading" aria-labelledby="installing-pillow"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing Pillow
        
        
      </h2>
    

<p>You can install Pillow on any OS using pip. (Pip is covered in the project chapters, if you haven’t gotten that far yet.)</p>

<p>Run this command in a terminal window:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python -m pip install --user pillow
</code></pre></div></div>

<p>You may need to use the command <strong>python3</strong> instead of <strong>python</strong>, or whichever command you use to start a Python terminal session on your system.</p>

<p><a href="#top">top</a></p><hr />
      <h2 id="loading-an-image">
        
        
          <a href="#loading-an-image" class="anchor-heading" aria-labelledby="loading-an-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Loading an Image
        
        
      </h2>
    

<p>You can open an existing image in just a few lines of code. Here we’ll open an image, and get some helpful information about the image.</p>

<p>To run this code, make a folder somewhere on your system called <em>photo_work</em>, or something like that. In that folder, make two more folders called <em>original_images</em> and <em>modified_images</em>. It’s a really good idea to use a copy of an image, so you don’t accidentally modify or destroy an image you might care about. It’s also good to keep your original images separate from your modified images, so you are always starting with the same image when you run your code.</p>

<p>Enter this code, with a filename that matches your image. If you want to use the same image I’m using here, you can find it in the <a href="https://github.com/ehmatthes/pcc_2e/tree/master/beyond_pcc"><em>beyond_pcc</em></a> folder when you <a href="https://github.com/ehmatthes/pcc_2e/zipball/master/">download the resources for the book</a>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">'starr_bears.jpg'</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"original_images/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Load the original image, and get its size and color mode.
</span><span class="n">orig_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">size</span>
<span class="n">mode</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">mode</span>

<span class="c1"># Show information about the original image.
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Original image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Size: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s"> x </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s"> pixels"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Show the image.
</span><span class="n">orig_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>We import the <code class="language-plaintext highlighter-rouge">Image</code> class from the PIL library, which was installed as part of Pillow. We specify the filename and filepath of the original image, so we can use a different path for the modified image later. We then call the <code class="language-plaintext highlighter-rouge">Image.open()</code> function. Once the image is open, we can get some information about the image; here we pull its width and height, and the color mode of the image. Then we display this image.</p>

<p>Here’s the text output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Original image: starr_bears.jpg
Size: 1560 x 811 pixels
Mode: RGB
</code></pre></div></div>

<p>The last line uses your system’s image viewer to display the image. You can see from the filename in the viewer (<em>tmpt8sb9_sb.PNG</em> in my case), that Pillow creates a temporary file to display the current image.</p>

<p>So far, we haven’t done anything to modify the image:</p>

<p><img src="../../images/challenge_images/starr_bears.jpg" alt="" /></p>
      <h2 id="exploring-pixel-data">
        
        
          <a href="#exploring-pixel-data" class="anchor-heading" aria-labelledby="exploring-pixel-data"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exploring Pixel Data
        
        
      </h2>
    
      <h3 id="examining-the-first-pixel">
        
        
          <a href="#examining-the-first-pixel" class="anchor-heading" aria-labelledby="examining-the-first-pixel"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examining the First Pixel
        
        
      </h3>
    

<p>Before working with many pixels, let’s just look at one single pixel. The following code loads all the pixels in the image, and then prints the pixel data for the very first pixel in the image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">'starr_bears.jpg'</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"original_images/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Load the original image, and get its size and color mode.
</span><span class="n">orig_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">size</span>
<span class="n">mode</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">mode</span>

<span class="c1"># Show information about the original image.
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Original image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Size: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s"> x </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s"> pixels"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Load all pixels from the image.
</span><span class="n">orig_pixel_map</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Look at the pixel in the top left corner.
</span><span class="n">first_pixel</span> <span class="o">=</span> <span class="n">orig_pixel_map</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="se">\n</span><span class="s">First pixel: </span><span class="si">{</span><span class="n">first_pixel</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">load()</code> method loads all the pixels into a custom Pillow data structure that allows us to work with all of the pixels using x, y coordinates. The pixel at (0, 0) is in the upper left corner of the image. To specify an individual pixel, you use square brackets containing the x and y values of the pixel you want to examine. Here’s the output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Original image: starr_bears.jpg
Size: 1560 x 811 pixels
Mode: RGB

First pixel: (31, 52, 21)
</code></pre></div></div>

<p>Each pixel is represented as a tuple with three elements, corresponding to the RGB components of the pixel’s color. We can see that this pixel has a red component of 31, a green component of 52, and a blue component of 21. You can plug these values into an <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Colors/Color_picker_tool">online color tool</a> and see what color this pixel is if you’re curious:</p>

<p><img src="../../images/challenge_images/color_31_52_21.png" alt="" /></p>
      <h3 id="examining-multiple-pixels">
        
        
          <a href="#examining-multiple-pixels" class="anchor-heading" aria-labelledby="examining-multiple-pixels"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examining Multiple Pixels
        
        
      </h3>
    

<p>You’ll usually want to work with more than one pixel. Often, this is done with a set of nested loops, iterating over the columns and rows of an image. The following code loops over all the pixels in the top left 10px by 10px region of the image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">'starr_bears.jpg'</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"original_images/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Load the original image, and get its size and color mode.
</span><span class="n">orig_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">size</span>
<span class="n">mode</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">mode</span>

<span class="c1"># Show information about the original image.
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Original image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Size: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s"> x </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s"> pixels"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Load all pixels from the image.
</span><span class="n">orig_pixel_map</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Examine the 100 pixels in the top left corner of the image.
</span><span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Pixel data:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">pixel</span> <span class="o">=</span> <span class="n">orig_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
        <span class="k">print</span><span class="p">(</span><span class="n">pixel</span><span class="p">)</span>
</code></pre></div></div>

<p>To see some pixels, we loop over the first 10 x values and the first 10 y values. This means we’ll first examine the pixel at (0, 0), then the pixel at (0, 1), then the pixel at (0, 2). This is the beginning of the first row or pixels. When we reach (0, 9), the x value will increase by 1 and the y value will start back at 0. We’ll then start on the second row: (1, 0), then (1, 1), followed by (1, 2). Here’s the first few lines of the output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Original image: starr_bears.jpg
Size: 1560 x 811 pixels
Mode: RGB

Pixel data:
(31, 52, 21)
(33, 53, 18)
(46, 64, 26)
(60, 77, 35)
--snip--
</code></pre></div></div>

<p>The pixels are getting brighter as we move from a region of shadow into a grassy region.</p>
      <h3 id="seeing-all-the-pixels">
        
        
          <a href="#seeing-all-the-pixels" class="anchor-heading" aria-labelledby="seeing-all-the-pixels"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Seeing All the Pixels
        
        
      </h3>
    

<p>To see all the pixels, we need to loop over the entire image. To do this, we only need to change the boundaries of the loop at the end of the previous program. Here’s the modified loop:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">--</span><span class="n">snip</span><span class="o">--</span>

<span class="c1"># Examine all pixels in the image.
</span><span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">Pixel data:"</span><span class="p">)</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
        <span class="n">pixel</span> <span class="o">=</span> <span class="n">orig_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
        <span class="k">print</span><span class="p">(</span><span class="n">pixel</span><span class="p">)</span>
</code></pre></div></div>

<p>We loop over all x values in the width of the image, and then loop over all y values in the height of the image. The output looks exactly the same as the previous example, except it goes on and on.</p>

<p>There are 1560 * 811 = 1,265,160 pixels in this image. Printing is one of the slowest operations you can do, so you may want to press Ctrl-C to stop your output instead of waiting for all of the pixels to scroll by.</p>
      <h2 id="making-an-exact-copy">
        
        
          <a href="#making-an-exact-copy" class="anchor-heading" aria-labelledby="making-an-exact-copy"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Making an Exact Copy
        
        
      </h2>
    

<p>Before modifying the image, let’s make sure we can simply copy the image. Then we can be confident that our code for modifying the original image will be based on an accurate reproduction of the original image.</p>
      <h3 id="generating-a-new-image">
        
        
          <a href="#generating-a-new-image" class="anchor-heading" aria-labelledby="generating-a-new-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Generating a New Image
        
        
      </h3>
    

<p>The following code generates a new image, with the same color mode and size as the original image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">'starr_bears.jpg'</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"original_images/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Load the original image, and get its size and color mode.
</span><span class="n">orig_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">size</span>
<span class="n">mode</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">mode</span>

<span class="c1"># Show information about the original image.
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Original image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Size: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s"> x </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s"> pixels"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Load all pixels from the image.
</span><span class="n">orig_pixel_map</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Create a new image matching the original image's color mode, and size.
#   Load all the pixels from this new image as well.
</span><span class="n">new_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>

<span class="n">new_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">Image.new()</code> function creates a new image. It requires a <a href="">color mode</a>, which we set to match the original image’s mode. It also requires a size, specified as a tuple with a width and height. We pass in the dimensions of our original image. If you don’t specify a base color, the new image starts out with all black pixels:</p>

<p><img src="../../images/challenge_images/starr_bears_black.png" alt="" /></p>
      <h3 id="copying-all-pixels-to-the-new-image">
        
        
          <a href="#copying-all-pixels-to-the-new-image" class="anchor-heading" aria-labelledby="copying-all-pixels-to-the-new-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Copying all Pixels to the New Image
        
        
      </h3>
    

<p>Now let’s copy all the pixel data from the original image to the new image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="n">filename</span> <span class="o">=</span> <span class="s">'starr_bears.jpg'</span>
<span class="n">filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"original_images/</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Load the original image, and get its size and color mode.
</span><span class="n">orig_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">size</span>
<span class="n">mode</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">mode</span>

<span class="c1"># Show information about the original image.
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Original image: </span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Size: </span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s"> x </span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s"> pixels"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Mode: </span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Load all pixels from the image.
</span><span class="n">orig_pixel_map</span> <span class="o">=</span> <span class="n">orig_image</span><span class="p">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Create a new image matching the original image's color mode, and size.
#   Load all the pixels from this new image as well.
</span><span class="n">new_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>
<span class="n">new_pixel_map</span> <span class="o">=</span> <span class="n">new_image</span><span class="p">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Modify each pixel in the new image.
</span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
        <span class="c1"># Copy the original pixel to the new pixel map.
</span>        <span class="n">new_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">orig_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>

<span class="n">new_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>When I run this code, an image with the filename <em>tmpdmq72fv3.PNG</em> pops up, but it looks exactly like the original image:</p>

<p><img src="../../images/challenge_images/modified_starr_bears.jpg" alt="" /></p>
      <h3 id="saving-the-new-image">
        
        
          <a href="#saving-the-new-image" class="anchor-heading" aria-labelledby="saving-the-new-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Saving the New Image
        
        
      </h3>
    

<p>If you want to save the new image after viewing it, you can call the <code class="language-plaintext highlighter-rouge">save()</code>method with a filename or file path. Here’s the code to do that:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">--</span><span class="n">snip</span><span class="o">--</span>

<span class="n">new_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">new_filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"modified_</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s">"</span>
<span class="n">new_filepath</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"modified_images/</span><span class="si">{</span><span class="n">new_filename</span><span class="si">}</span><span class="s">"</span>
<span class="n">new_image</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">new_filepath</span><span class="p">)</span>
</code></pre></div></div>

<p>This code adds the prefix <em>modified_</em> to the original filename, and saves it in the folder <em>modified_images</em> so it’s in a different place than the original image. This approach avoids accidentally writing over your original images.</p>

<p>This operation can be slow, as Pillow has to write each individual pixel to disk. On my system, for an image this size, it took about 20 seconds. You might want to avoid calling <code class="language-plaintext highlighter-rouge">save()</code> until you know your code does what you want it to.</p>
      <h3 id="copying-individual-rgb-values">
        
        
          <a href="#copying-individual-rgb-values" class="anchor-heading" aria-labelledby="copying-individual-rgb-values"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Copying Individual RGB Values
        
        
      </h3>
    

<p>If you’re trying to build a photo filter or do other image manipulation work, you probably want to work with the individual RGB components of each pixel. The following code pulls the RGB component values of each pixel, and copies over these individual values to each pixel in the new image.</p>

<p>Most of the program is unchanged, so here’s the loop that’s used to create the new image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">--</span><span class="n">snip</span><span class="o">--</span>

<span class="c1"># Modify each pixel in the new image.
</span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
        <span class="c1"># Grab the current pixel, and the component RGB values.
</span>        <span class="n">orig_pixel</span> <span class="o">=</span> <span class="n">orig_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
        <span class="n">orig_r</span> <span class="o">=</span> <span class="n">orig_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">orig_g</span> <span class="o">=</span> <span class="n">orig_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">orig_b</span> <span class="o">=</span> <span class="n">orig_pixel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1"># Copy this data over to the corresponding pixel in the new image.
</span>        <span class="n">new_r</span> <span class="o">=</span> <span class="n">orig_r</span>
        <span class="n">new_g</span> <span class="o">=</span> <span class="n">orig_g</span>
        <span class="n">new_b</span> <span class="o">=</span> <span class="n">orig_b</span>
        <span class="n">new_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_r</span><span class="p">,</span> <span class="n">new_g</span><span class="p">,</span> <span class="n">new_b</span><span class="p">)</span>
        <span class="n">new_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pixel</span>

<span class="n">new_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>We first pull the original pixel, and assign it to <code class="language-plaintext highlighter-rouge">orig_pixel</code>. We then assign the first element of the pixel’s tuple to <code class="language-plaintext highlighter-rouge">orig_r</code>, the second to <code class="language-plaintext highlighter-rouge">orig_g</code>, and the third to <code class="language-plaintext highlighter-rouge">orig_b</code>. Now we have easy access to each color component of every pixel in the original image!</p>

<p>We create three new variables: <code class="language-plaintext highlighter-rouge">new_r</code>, <code class="language-plaintext highlighter-rouge">new_g</code>, and <code class="language-plaintext highlighter-rouge">new_b</code>. We use these to create a new pixel, which is a tuple containing the three RGB component values that we want for this pixel. Then we assign this new pixel to the appropriate point in <code class="language-plaintext highlighter-rouge">new_pixel_map</code>.</p>

<p>The result is an exact copy of the original image, just as we made previously. However, this approach gives us a lot of flexibility in how we might want to modify the image. You can use any rule you want for setting the values of <code class="language-plaintext highlighter-rouge">new_r</code>, <code class="language-plaintext highlighter-rouge">new_g</code>, and <code class="language-plaintext highlighter-rouge">new_b</code>. You can bump the original values up, you can decrease them, you can change only some of them. If you set them all to the same value according to some rule, you’ll end up with a black and white image.</p>
      <h2 id="brightening-the-image">
        
        
          <a href="#brightening-the-image" class="anchor-heading" aria-labelledby="brightening-the-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Brightening the Image
        
        
      </h2>
    

<p>Let’s make one modification to the image. We’ll brighten the image, which corresponds to increasing all of the component values for each pixel.</p>

<p>Again, most of the code doesn’t change. Here’s the loop that brightens the image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">--</span><span class="n">snip</span><span class="o">--</span>

<span class="c1"># Brighten each pixel in the new image.
</span><span class="n">brightness_factor</span> <span class="o">=</span> <span class="mf">1.4</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
        <span class="c1"># Grab the current pixel, and the component RGB values.
</span>        <span class="n">orig_pixel</span> <span class="o">=</span> <span class="n">orig_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span>
        <span class="n">orig_r</span> <span class="o">=</span> <span class="n">orig_pixel</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">orig_g</span> <span class="o">=</span> <span class="n">orig_pixel</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">orig_b</span> <span class="o">=</span> <span class="n">orig_pixel</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="c1"># Copy this data over to the corresponding pixel in the new image.
</span>        <span class="n">new_r</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">orig_r</span> <span class="o">*</span> <span class="n">brightness_factor</span><span class="p">)</span>
        <span class="n">new_g</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">orig_g</span> <span class="o">*</span> <span class="n">brightness_factor</span><span class="p">)</span>
        <span class="n">new_b</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">orig_b</span> <span class="o">*</span> <span class="n">brightness_factor</span><span class="p">)</span>
        <span class="n">new_pixel</span> <span class="o">=</span> <span class="p">(</span><span class="n">new_r</span><span class="p">,</span> <span class="n">new_g</span><span class="p">,</span> <span class="n">new_b</span><span class="p">)</span>
        <span class="n">new_pixel_map</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_pixel</span>

<span class="n">new_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>We set a brightness factor, which we’ll multiply every RGB component value by. If this is equal to 1, we’ll get an exact copy of the image. If it’s greater than 1 we’ll get a brighter image, and if it’s less than 1 we’ll get a darker image. The value 1.4 is probably higher than what you’d want for artistic purposes, but we want it to be really clear that the new image is brighter than the original.</p>

<p>Component values in this color model need to be integers, so we wrap the <code class="language-plaintext highlighter-rouge">int()</code> function around the multiplication operation for each pixel. The result is a brighter image, which you can see by looking at the original next to the brightened image:</p>

<p><img src="../../images/challenge_images/starr_bears.jpg" alt="" />
<img src="../../images/challenge_images/brightened_starr_bears.jpg" alt="" /></p>

<p>If you want to have a little fun with this, try swapping the red and green values, or switching all three values. You should still see the bears, but they should look quite different!</p>
      <h2 id="starting-from-a-blank-image">
        
        
          <a href="#starting-from-a-blank-image" class="anchor-heading" aria-labelledby="starting-from-a-blank-image"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Starting From a Blank Image
        
        
      </h2>
    

<p>If you want, you can start with a blank image and specify the pixels according to any algorithm you choose.</p>

<p>Here’s the code to create a new, blank image:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="c1"># Set a size and mode, and create a new image.
</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="n">mode</span> <span class="o">=</span> <span class="s">'RGB'</span>
<span class="n">my_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>

<span class="n">my_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>We set a size for our new image, and set the mode to <code class="language-plaintext highlighter-rouge">'RGB'</code>. Then we call <code class="language-plaintext highlighter-rouge">Image.new()</code>, just like you saw earlier.</p>

<p>We get an image that’s all black, with the dimensions we specified:</p>

<p><img src="../../images/challenge_images/blank_black.png" alt="" /></p>

<p>To demonstrate a simple way to work with a blank canvas, we’ll set every pixel’s component value randomly:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">randint</span>

<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>

<span class="c1"># Set a size and mode, and create a new image.
</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
<span class="n">mode</span> <span class="o">=</span> <span class="s">'RGB'</span>
<span class="n">my_image</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span>

<span class="c1"># Load all the pixels.
</span><span class="n">my_pixels</span> <span class="o">=</span> <span class="n">my_image</span><span class="p">.</span><span class="n">load</span><span class="p">()</span>

<span class="c1"># Loop through all the pixels, and set each color randomly.
</span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">width</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">height</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="n">g</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>
        <span class="n">pixel</span> <span class="o">=</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
        <span class="n">my_pixels</span><span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">pixel</span>

<span class="n">my_image</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<p>We import the <a href="./beyond_pcc/random_functions/"><code class="language-plaintext highlighter-rouge">randint()</code> function</a> from the <code class="language-plaintext highlighter-rouge">random</code> module, which returns a random integer between the bounds you provide. We then load the pixels as you saw earlier, so we can work with each pixel individually. This time we’re not reading any pixels in the loop, since we’re not basing our new pixels off of an existing image. In the loop we choose a random value between 0 and 255 for each of the RGB components, and we build a pixel from these values. Then we set the current pixel.</p>

<p>The result is an image where every color is completely random:</p>

<p><img src="../../images/challenge_images/random_colors.png" alt="" /></p>

<p>If you look at this image in a file browser, you’ll notice that it takes up much more memory than other images of comparable dimensions. For example the blank black image takes about 19 KB of memory, while the random color image takes up almost 3 MB of memory. That’s because a truly random image cannot be compressed at all. There are no similar regions to compress, so the details of every single pixel must be stored individually.</p>
      <h2 id="final-words">
        
        
          <a href="#final-words" class="anchor-heading" aria-labelledby="final-words"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Final Words
        
        
      </h2>
    

<p>This just touches on what you can with an image processing library. The book has not shown a number of things that are possible, because it’s so much more fun to try it yourself than to read about it here. For example, you can build your own photo filters and run them on your own images. You can generate images containing all possible colors.  You can do more complex analysis, like finding edges and sharpening images. You can even write code that identifies, say, all the ice worms in an image.</p>

<p>This work is the basis of how apps like <a href="https://github.com/Instagram">Instagram</a> and tools like <a href="https://github.com/topics/adobe-photoshop">Photoshop</a> are built. Enjoy your explorations, and if you make something interesting please share it! The author is @ehmatthes on Twitter<a href="http://twitter.com/ehmatthes/"><img src="https://raw.githubusercontent.com/johan/svg-cleanups/master/logos/twitter.svg" width="15" />  @ehmatthes</a>, and you can also email him at 📧 <a href="javascript:location='mailto:\u0065\u0068\u006d\u0061\u0074\u0074\u0068\u0065\u0073\u0040\u0067\u006d\u0061\u0069\u006c\u002e\u0063\u006f\u006d';void 0"><img class="email" src="/pcc_2e/assets/images/ematthes.svg" /></a>.</p>


        

        

        
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
</body>
</html>

